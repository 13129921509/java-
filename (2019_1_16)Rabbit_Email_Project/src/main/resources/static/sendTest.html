<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>会员注册&邮件发送</title>
</head>
<body>
<button type="button" ID="addDiv" value="增加">增加</button>
<button type="button" ID="addDiv1000" value="增加1000">增加1000</button>
<button type="button" ID="commit" value="提交">提交</button>
<div id="content">
    <div class="send">
        username:<input type="text" style="margin-right: 50px;">
        email:<input type="text" style="margin-right: 50px;">
    </div>
</div>
</body>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script type="text/javascript">
    document.getElementById("addDiv").addEventListener("click",function (ev) {
        var dom = document.getElementsByClassName("send")[0].cloneNode(true);
        document.getElementById("content").appendChild(dom);
    },true);
    document.getElementById("addDiv1000").addEventListener("click",function (ev) {
        for(var i = 0 ; i < 100 ; i++){
            var dom = document.getElementsByClassName("send")[0].cloneNode(true);
            document.getElementById("content").appendChild(dom);
        }
    },true);
    document.getElementById("commit").addEventListener("click",function (ev) {
        var v=[]
        for(var i = 0 ; i < document.getElementsByClassName("send").length;i++){
            item = {};
            item["username"] = document.getElementsByClassName("send")[i].children[0].value;
            item["email"] = document.getElementsByClassName("send")[i].children[1].value;
            v.push(item);
        }
        // var data = {}
        // data["data"] = v;
        data = {
            "data":v
        }
        $.ajax({
            type:"POST",
            url:"registerPerson",
            data:JSON.stringify(data),
            // dataType:json,
            contentType:"application/json; charset=utf-8",
            success:function (msg) {
                
            }
        })
    },true);
</script>
</html>